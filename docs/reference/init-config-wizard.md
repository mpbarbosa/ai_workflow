# Configuration Wizard - User Guide

**Feature**: `--init-config`  
**Version**: 1.0.0  
**Date**: 2025-12-18  
**Status**: ✅ Production Ready

---

## Overview

The `--init-config` option launches an interactive configuration wizard that helps you create a `.workflow-config.yaml` file for your project. This wizard provides a user-friendly way to set up language-specific workflow optimization without manually editing YAML files.

---

## Usage

### Basic Usage

```bash
cd /path/to/your/project
./execute_tests_docs_workflow.sh --init-config
```

### With Target Option

```bash
./execute_tests_docs_workflow.sh --target /path/to/project --init-config
```

---

## Wizard Flow

The wizard guides you through 5 steps:

### Step 1: Technology Stack Detection

The wizard automatically detects your project's technology stack by analyzing:
- Package manager files (package.json, requirements.txt, go.mod, etc.)
- Lock files (package-lock.json, Cargo.lock, etc.)
- Source files (*.js, *.py, *.go, etc.)

**Example Output**:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Step 1/5: Technology Stack Detection
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Analyzing project structure...

✓ Detection complete!

  Detected Language: python
  Confidence:        92%
  Build System:      pip
  Test Framework:    pytest

Is this correct? [y/N]:
```

If incorrect, you can manually select from:
- javascript
- python
- go
- java
- ruby
- rust
- cpp (C/C++)
- bash

### Step 2: Project Information

Collects basic project metadata.

**Prompts**:
- **Project name**: Auto-detected from package files or directory name
- **Project description**: Optional description

**Example**:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Step 2/5: Project Information
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Project name [my-python-app]: 
Project description (optional): A data processing application

✓ Project information saved
```

### Step 3: Project Structure

Configures directory structure.

**Prompts**:
- **Source directories**: Where your source code lives
- **Test directories**: Where your tests are located
- **Documentation directories**: Where docs are stored

**Example**:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Step 3/5: Project Structure
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Configure your project directory structure...

Source directories (space-separated) [src]: src lib
Test directories (space-separated) [tests]: tests
Documentation directories (space-separated) [docs]: docs

✓ Project structure configured
```

**Language-Specific Defaults**:

| Language | Source Dirs | Test Dirs |
|----------|-------------|-----------|
| JavaScript | src | tests __tests__ |
| Python | src | tests |
| Go | . | . |
| Java | src/main/java | src/test/java |
| Ruby | lib app | spec test |
| Rust | src | tests |
| C/C++ | src include | tests |
| Bash | bin lib | tests |

### Step 4: Build & Test Commands

Configures execution commands.

**Prompts**:
- **Test command**: Command to run tests
- **Lint command**: Command to run linter (optional)

**Example**:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Step 4/5: Build & Test Commands
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Configure commands for your project...

Test command [pytest]: pytest -v
Lint command (optional) [pylint src/]: pylint src/ tests/

✓ Commands configured
```

**Language-Specific Defaults**:

| Language | Test Command | Lint Command |
|----------|-------------|--------------|
| JavaScript | npm test | npm run lint |
| Python | pytest | pylint src/ |
| Go | go test ./... | golangci-lint run |
| Java | mvn test | mvn checkstyle:check |
| Ruby | bundle exec rspec | rubocop |
| Rust | cargo test | cargo clippy |
| C/C++ | ctest --test-dir build | clang-tidy src/*.cpp |
| Bash | bats tests/ | shellcheck *.sh |

### Step 5: Review & Save

Displays the complete configuration for review before saving.

**Example**:
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Step 5/5: Review & Save
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Here's your configuration:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# AI Workflow Automation Configuration
# Generated by Configuration Wizard on 2025-12-18 11:49:15

project:
  name: "my-python-app"
  description: "A data processing application"
  kind: "python_api"              # Detected project kind

tech_stack:
  primary_language: "python"
  build_system: "pip"
  test_framework: "pytest"
  test_command: "pytest -v"
  lint_command: "pylint src/ tests/"

structure:
  source_dirs:
    - src
    - lib
  test_dirs:
    - tests
  docs_dirs:
    - docs
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Save this configuration to .workflow-config.yaml? [y/N]:
```

---

## Features

### ✅ Auto-Detection

- **Intelligent Detection**: Analyzes project structure to identify technology stack
- **Confidence Scoring**: Shows detection confidence (0-100%)
- **Fallback Options**: Manual selection if auto-detection fails or is rejected

### ✅ Smart Defaults

- **Language-Specific**: Provides appropriate defaults based on detected/selected language
- **Context-Aware**: Uses project files to suggest names and settings
- **Customizable**: All defaults can be overridden

### ✅ User-Friendly Interface

- **Clear Steps**: 5 well-defined steps with progress indication
- **Helpful Prompts**: Descriptive prompts with default values
- **Visual Design**: Colorful, organized terminal UI
- **Error Handling**: Graceful handling of invalid inputs

### ✅ Safety Features

- **Overwrite Protection**: Warns if .workflow-config.yaml already exists
- **Preview Before Save**: Shows complete configuration before writing
- **Cancellation**: Can cancel at any step

---

## Generated Configuration

The wizard creates a `.workflow-config.yaml` file with the following structure:

```yaml
# AI Workflow Automation Configuration
# Generated by Configuration Wizard on <timestamp>

project:
  name: "<project-name>"
  description: "<optional-description>"
  kind: "<project-kind>"          # Optional: shell_automation, nodejs_api, nodejs_cli, static_website, etc.

tech_stack:
  primary_language: "<language>"
  build_system: "<build-system>"
  test_framework: "<test-framework>"
  test_command: "<test-command>"
  lint_command: "<lint-command>"

structure:
  source_dirs:
    - <dir1>
    - <dir2>
  test_dirs:
    - <dir1>
  docs_dirs:
    - <dir1>
```

---

## Examples

### Example 1: Python Project

```bash
$ ./execute_tests_docs_workflow.sh --init-config

# Step 1: Auto-detects Python (92% confidence)
# User confirms: y

# Step 2: Project info
Project name [myapp]: data-processor
Project description: Data processing pipeline

# Step 3: Structure
Source directories [src]: src
Test directories [tests]: tests
Documentation directories [docs]: docs

# Step 4: Commands
Test command [pytest]: pytest -v --cov
Lint command [pylint src/]: pylint src/

# Step 5: Review and save
Save this configuration? y

✓ Configuration saved successfully!
File created: .workflow-config.yaml
```

**Generated File**:
```yaml
project:
  name: "data-processor"
  description: "Data processing pipeline"

tech_stack:
  primary_language: "python"
  build_system: "pip"
  test_framework: "pytest"
  test_command: "pytest -v --cov"
  lint_command: "pylint src/"

structure:
  source_dirs:
    - src
  test_dirs:
    - tests
  docs_dirs:
    - docs
```

### Example 2: Go Project

```bash
$ ./execute_tests_docs_workflow.sh --init-config

# Step 1: Auto-detects Go (95% confidence)
# User confirms: y

# Step 2: Project info
Project name [github.com/user/myapp]: 
Project description: Microservice API

# Step 3: Structure
Source directories [.]: cmd pkg internal
Test directories [.]: .
Documentation directories [docs]: docs

# Step 4: Commands
Test command [go test ./...]: go test -v ./...
Lint command [golangci-lint run]: golangci-lint run

# Step 5: Review and save
Save this configuration? y
```

### Example 3: JavaScript Project (Manual Selection)

```bash
$ ./execute_tests_docs_workflow.sh --init-config

# Step 1: Auto-detects JavaScript (98% confidence)
# User says no: n

# Manual language selection
Select your primary language:
  1) javascript
  2) python
  3) go
  ...
Enter selection [1-8]: 1

# Continue with remaining steps...
```

---

## Tips & Best Practices

### 1. Run from Project Root

Always run the wizard from your project root directory:
```bash
cd /path/to/project
./path/to/workflow/execute_tests_docs_workflow.sh --init-config
```

### 2. Review Auto-Detection

Check the auto-detected settings carefully. While detection is accurate (89% average), manual review ensures correctness.

### 3. Customize Commands

Don't accept defaults blindly. Customize test and lint commands to match your project's specific needs:
- Add coverage flags: `pytest --cov`
- Specify verbose output: `go test -v ./...`
- Include custom configurations: `eslint --config .eslintrc.js`

### 4. Use Multiple Source Directories

If your project has multiple source locations, list them all:
```
Source directories: src lib utils
```

### 5. Version Control

Commit the generated `.workflow-config.yaml` to version control so team members have consistent configuration.

---

## Troubleshooting

### Issue: Wizard Doesn't Detect My Language

**Solution**: Manually select your language when prompted "Is this correct? [y/N]" → Answer "n"

### Issue: Can't Find Package File

**Cause**: The wizard looks for standard package files (package.json, go.mod, requirements.txt, etc.)

**Solution**: Ensure your package file is in the project root, or manually configure.

### Issue: Wrong Default Commands

**Solution**: When prompted for commands, override the defaults with your project-specific commands.

### Issue: Already Have .workflow-config.yaml

The wizard will warn you:
```
⚠️  Warning: .workflow-config.yaml already exists!
Overwrite existing configuration? [y/N]:
```

Choose:
- **y**: Overwrite (backs up existing file first)
- **n**: Cancel wizard

---

## Advanced Usage

### Scripted/Automated Configuration

While the wizard is interactive, you can pipe answers for automation:

```bash
# Auto-accept all defaults
printf "y\n\n\n\n\n\n\n\ny\n" | ./execute_tests_docs_workflow.sh --init-config
```

**Note**: This is primarily for testing. Interactive use is recommended for production configurations.

### Custom Validation

After wizard completion, you can validate the configuration:

```bash
./execute_tests_docs_workflow.sh --show-tech-stack
```

This displays the loaded configuration and confirms it's working correctly.

---

## Integration

### With CI/CD

Generate configuration once, commit to repository:

```bash
# Local development
./execute_tests_docs_workflow.sh --init-config

# Commit generated file
git add .workflow-config.yaml
git commit -m "Add workflow configuration"

# CI/CD automatically uses it
# No wizard needed in CI - just run workflow
./execute_tests_docs_workflow.sh --auto
```

### With Team Workflow

1. **One-Time Setup**: Project lead runs wizard
2. **Commit Configuration**: Check in `.workflow-config.yaml`
3. **Team Usage**: All team members use same configuration automatically

---

## Related Documentation

- **Tech Stack Framework**: `docs/TECH_STACK_ADAPTIVE_FRAMEWORK.md`
- **Configuration Schema**: `src/workflow/config/workflow_config_schema.yaml`
- **Templates**: `src/workflow/config/templates/`
- **Quick Reference**: `docs/TECH_STACK_QUICK_REFERENCE.md`

---

## Version History

| Version | Date | Changes |
|---------|------|---------|
| 1.0.0 | 2025-12-18 | Initial release with 8 language support |

---

**Status**: ✅ **Production Ready**  
**Languages Supported**: 8 (JavaScript, Python, Go, Java, Ruby, Rust, C/C++, Bash)  
**Last Updated**: 2025-12-18
